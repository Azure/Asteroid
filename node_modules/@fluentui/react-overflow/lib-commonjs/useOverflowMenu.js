"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useOverflowMenu = void 0;

const React = /*#__PURE__*/require("react");

const react_utilities_1 = /*#__PURE__*/require("@fluentui/react-utilities");

const overflowContext_1 = /*#__PURE__*/require("./overflowContext");

const useOverflowCount_1 = /*#__PURE__*/require("./useOverflowCount");

function useOverflowMenu(id) {
  const elementId = react_utilities_1.useId('overflow-menu', id);
  const overflowCount = useOverflowCount_1.useOverflowCount();
  const registerOverflowMenu = overflowContext_1.useOverflowContext(v => v.registerOverflowMenu);
  const updateOverflow = overflowContext_1.useOverflowContext(v => v.updateOverflow);
  const ref = React.useRef(null);
  const isOverflowing = overflowCount > 0;
  react_utilities_1.useIsomorphicLayoutEffect(() => {
    if (ref.current) {
      return registerOverflowMenu(ref.current);
    }
  }, [registerOverflowMenu, isOverflowing, elementId]);
  react_utilities_1.useIsomorphicLayoutEffect(() => {
    if (isOverflowing) {
      updateOverflow();
    }
  }, [isOverflowing, updateOverflow, ref]);
  return {
    ref,
    overflowCount,
    isOverflowing
  };
}

exports.useOverflowMenu = useOverflowMenu;
//# sourceMappingURL=useOverflowMenu.js.map