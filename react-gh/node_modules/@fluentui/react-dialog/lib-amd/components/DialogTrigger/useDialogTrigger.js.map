{"version":3,"file":"useDialogTrigger.js","sourceRoot":"","sources":["../../../../../../../../../packages/react-components/react-dialog/src/components/DialogTrigger/useDialogTrigger.ts"],"names":[],"mappings":";;;;IAOA;;;;;OAKG;IACI,IAAM,yBAAyB,GAAG,UAAC,KAAyB;QACjE,IAAM,qBAAqB,GAAG,2CAAgC,EAAE,CAAC;QAEzD,IAAA,QAAQ,GAA0F,KAAK,SAA/F,EAAE,KAAwF,KAAK,yBAA7D,EAAhC,wBAAwB,mBAAG,KAAK,KAAA,EAAE,KAAsD,KAAK,OAAV,EAAjD,MAAM,mBAAG,qBAAqB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,KAAA,CAAW;QAEhH,IAAM,KAAK,GAAG,iCAAe,CAAC,QAAQ,CAAC,CAAC;QAExC,IAAM,iBAAiB,GAAG,oCAAyB,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,iBAAiB,EAArB,CAAqB,CAAC,CAAC;QAClF,IAAM,IAAI,GAAG,oCAAyB,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,IAAI,EAAR,CAAQ,CAAC,CAAC;QAEhD,IAAA,iBAAiB,GAAK,kCAAkB,EAAE,kBAAzB,CAA0B;QAEnD,IAAM,WAAW,GAAG,kCAAgB,CAClC,UAAC,KAA+E;;YAC9E,MAAA,KAAK,aAAL,KAAK,6BAAL,KAAK,CAAE,KAAK,EAAC,OAAO,mDAAG,KAAK,CAAC,CAAC;YAC9B,IAAI,CAAC,KAAK,CAAC,kBAAkB,EAAE,EAAE;gBAC/B,iBAAiB,CAAC;oBAChB,KAAK,OAAA;oBACL,IAAI,EAAE,cAAc;oBACpB,IAAI,EAAE,MAAM,KAAK,MAAM;iBACxB,CAAC,CAAC;aACJ;QACH,CAAC,CACF,CAAC;QAEF,IAAM,iBAAiB,GAAG,uDACrB,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,KAAK,KACf,eAAe,EAAE,IAAI,EACrB,GAAG,EAAE,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,GAAG,EACf,OAAO,EAAE,WAAW,KACjB,iBAAiB,CACZ,CAAC;QAEX,IAAM,2BAA2B,GAAG,+BAAkB,CACpD,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,IAAI,MAAK,QAAQ,IAAI,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,IAAI,MAAK,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,wCAE/D,iBAAiB,KACpB,IAAI,EAAE,QAAQ,IAEjB,CAAC;QAEF,OAAO;YACL,QAAQ,EAAE,6CAA2B,CACnC,QAAQ,EACR,wBAAwB,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,2BAA2B,CAC3E;SACF,CAAC;IACJ,CAAC,CAAC;IA/CW,QAAA,yBAAyB,6BA+CpC","sourcesContent":["import * as React from 'react';\nimport { useModalAttributes } from '@fluentui/react-tabster';\nimport { applyTriggerPropsToChildren, getTriggerChild, useEventCallback } from '@fluentui/react-utilities';\nimport type { DialogTriggerProps, DialogTriggerState } from './DialogTrigger.types';\nimport { useDialogContext_unstable, useDialogSurfaceContext_unstable } from '../../contexts';\nimport { useARIAButtonProps } from '@fluentui/react-aria';\n\n/**\n * Create the state required to render DialogTrigger.\n * Clones the only child component and adds necessary event handling behaviours to open a popup Dialog\n *\n * @param props - props from this instance of DialogTrigger\n */\nexport const useDialogTrigger_unstable = (props: DialogTriggerProps): DialogTriggerState => {\n  const isInsideSurfaceDialog = useDialogSurfaceContext_unstable();\n\n  const { children, disableButtonEnhancement = false, action = isInsideSurfaceDialog ? 'close' : 'open' } = props;\n\n  const child = getTriggerChild(children);\n\n  const requestOpenChange = useDialogContext_unstable(ctx => ctx.requestOpenChange);\n  const open = useDialogContext_unstable(ctx => ctx.open);\n\n  const { triggerAttributes } = useModalAttributes();\n\n  const handleClick = useEventCallback(\n    (event: React.MouseEvent<HTMLButtonElement & HTMLAnchorElement & HTMLDivElement>) => {\n      child?.props.onClick?.(event);\n      if (!event.isDefaultPrevented()) {\n        requestOpenChange({\n          event,\n          type: 'triggerClick',\n          open: action === 'open',\n        });\n      }\n    },\n  );\n\n  const triggerChildProps = {\n    ...child?.props,\n    'aria-expanded': open,\n    ref: child?.ref,\n    onClick: handleClick,\n    ...triggerAttributes,\n  } as const;\n\n  const ariaButtonTriggerChildProps = useARIAButtonProps(\n    child?.type === 'button' || child?.type === 'a' ? child.type : 'div',\n    {\n      ...triggerChildProps,\n      type: 'button',\n    },\n  );\n\n  return {\n    children: applyTriggerPropsToChildren(\n      children,\n      disableButtonEnhancement ? triggerChildProps : ariaButtonTriggerChildProps,\n    ),\n  };\n};\n"]}