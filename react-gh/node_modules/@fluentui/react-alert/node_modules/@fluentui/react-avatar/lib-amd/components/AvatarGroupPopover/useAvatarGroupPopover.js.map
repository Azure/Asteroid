{"version":3,"file":"useAvatarGroupPopover.js","sourceRoot":"","sources":["../../../../../../../../../packages/react-components/react-avatar/src/components/AvatarGroupPopover/useAvatarGroupPopover.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useAvatarGroupContext_unstable } from '../../contexts/AvatarGroupContext';\nimport { defaultAvatarGroupSize } from '../AvatarGroup/useAvatarGroup';\nimport { resolveShorthand, useControllableState } from '@fluentui/react-utilities';\nimport { MoreHorizontalRegular } from '@fluentui/react-icons';\nimport { OnOpenChangeData, OpenPopoverEvents, Popover, PopoverSurface } from '@fluentui/react-popover';\nimport type { AvatarGroupPopoverProps, AvatarGroupPopoverState } from './AvatarGroupPopover.types';\nimport { Tooltip } from '@fluentui/react-tooltip';\n\n/**\n * Create the state required to render AvatarGroupPopover.\n *\n * The returned state can be modified with hooks such as useAvatarGroupPopoverStyles_unstable,\n * before being passed to renderAvatarGroupPopover_unstable.\n *\n * @param props - props from this instance of AvatarGroupPopover\n */\nexport const useAvatarGroupPopover_unstable = (props: AvatarGroupPopoverProps): AvatarGroupPopoverState => {\n  const size = useAvatarGroupContext_unstable(ctx => ctx.size) ?? defaultAvatarGroupSize;\n  const layout = useAvatarGroupContext_unstable(ctx => ctx.layout);\n  const {\n    indicator = size < 24 ? 'icon' : 'count',\n    count = React.Children.count(props.children),\n    children,\n    ...restOfProps\n  } = props;\n\n  const [popoverOpen, setPopoverOpen] = useControllableState({\n    state: props.open,\n    defaultState: props.defaultOpen,\n    initialState: false,\n  });\n\n  const handleOnPopoverChange = (e: OpenPopoverEvents, data: OnOpenChangeData) => {\n    restOfProps.onOpenChange?.(e, data);\n    setPopoverOpen(data.open);\n  };\n\n  let triggerButtonChildren;\n  if (layout === 'pie') {\n    triggerButtonChildren = null;\n  } else if (indicator === 'icon') {\n    triggerButtonChildren = <MoreHorizontalRegular />;\n  } else {\n    triggerButtonChildren = count > 99 ? '99+' : `+${count}`;\n  }\n\n  return {\n    count,\n    indicator,\n    layout,\n    popoverOpen,\n    size,\n\n    components: {\n      root: Popover,\n      triggerButton: 'button',\n      content: 'ul',\n      popoverSurface: PopoverSurface,\n      tooltip: Tooltip,\n    },\n    root: {\n      // Popover expects a child for its children. The children are added in the renderAvatarGroupPopover.\n      children: <></>,\n      size: 'small',\n      trapFocus: true,\n      ...restOfProps,\n      open: popoverOpen,\n      onOpenChange: handleOnPopoverChange,\n    },\n    triggerButton: resolveShorthand(props.triggerButton, {\n      required: true,\n      defaultProps: {\n        children: triggerButtonChildren,\n        type: 'button',\n      },\n    }),\n    content: resolveShorthand(props.content, {\n      required: true,\n      defaultProps: {\n        children,\n        role: 'list',\n      },\n    }),\n    popoverSurface: resolveShorthand(props.popoverSurface, {\n      required: true,\n      defaultProps: {\n        'aria-label': 'Overflow',\n        tabIndex: 0,\n      },\n    }),\n    tooltip: resolveShorthand(props.tooltip, {\n      required: true,\n      defaultProps: {\n        content: 'View more people.',\n        relationship: 'label',\n      },\n    }),\n  };\n};\n"]}